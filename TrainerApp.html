<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>CRM Trainer.Ai ‚Äî –¢—Ä–µ–Ω–µ—Ä</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- Tailwind CSS —á–µ—Ä–µ–∑ CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Google Material Icons -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  
  <style>
    .material-symbols-outlined {
      font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
    }
    .scrollbar-hide::-webkit-scrollbar { display: none; }
    .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
    
    /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ AI */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.5);
      z-index: 50;
      display: none;
    }
    .modal-overlay.active { display: block; }
    
    .modal-content {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      height: 95vh;
      background: white;
      border-radius: 16px 16px 0 0;
      overflow: hidden;
      z-index: 51;
      transform: translateY(100%);
      transition: transform 0.3s ease-out;
    }
    
    .modal-overlay.active .modal-content {
      transform: translateY(0);
    }
    
    /* –¢–∞–±—ã –≤ Client Detail */
    .tab-indicator {
      position: absolute;
      bottom: 0;
      height: 2px;
      background: #2563eb;
      transition: all 0.3s ease;
    }
  </style>
</head>
<body class="bg-gray-50">
  
  <!-- Main Container -->
  <div id="app" class="w-full h-screen max-w-sm mx-auto bg-white flex flex-col relative">
    
    <!-- Header -->
    <div id="app-header" class="bg-white p-4 border-b border-gray-200">
      <div class="flex justify-between items-center">
        <h1 id="header-title" class="text-lg font-semibold text-gray-900">–°–≤–æ–¥–∫–∞</h1>
        <button id="profile-btn" class="w-10 h-10 rounded-full flex items-center justify-center text-2xl" style="background: linear-gradient(135deg, #4A90E2 0%, #7C3AED 100%);">
          üë®üèª‚Äçü¶≤
        </button>
      </div>
    </div>
    
    <!-- Screen Container -->
    <div id="screen-container" class="flex-1 overflow-y-auto pb-20"></div>
    
    <!-- Bottom Navigation -->
    <div class="bg-white border-t border-gray-200 px-4 py-2 fixed bottom-0 left-1/2 transform -translate-x-1/2 w-full max-w-sm z-10">
      <div class="flex justify-around">
        <button data-screen="dashboard" class="nav-btn flex flex-col items-center py-2 px-3 text-gray-500">
          <span class="material-symbols-outlined text-gray-500">bar_chart</span>
          <span class="text-xs mt-1">–°–≤–æ–¥–∫–∞</span>
        </button>
        <button data-screen="agent" class="nav-btn flex flex-col items-center py-2 px-3 text-gray-500">
          <span class="material-symbols-outlined text-gray-500">chat</span>
          <span class="text-xs mt-1">–ò–ò-–∞–≥–µ–Ω—Ç</span>
        </button>
      </div>
    </div>
    
  </div>
  
  <!-- AI Chat Modal -->
  <div id="ai-modal" class="modal-overlay">
    <div class="modal-content">
      <div class="bg-white p-4 border-b border-gray-200 flex justify-between items-center">
        <h2 class="text-lg font-semibold text-gray-900">–ò–ò-–∞–≥–µ–Ω—Ç</h2>
        <button id="close-ai-modal" class="text-gray-500 hover:text-gray-700">
          <span class="material-symbols-outlined text-gray-500">close</span>
        </button>
      </div>
      
      <div id="ai-messages" class="overflow-y-auto p-4 space-y-3" style="height: calc(95vh - 180px);">
        <!-- –°–æ–æ–±—â–µ–Ω–∏—è –∑–¥–µ—Å—å -->
      </div>
      
      <div class="p-4 border-t border-gray-200 space-y-2">
        <div class="flex gap-1 overflow-x-auto pb-2 scrollbar-hide">
          <button class="ai-action-btn flex-shrink-0 bg-gray-100 text-gray-700 py-1 px-3 rounded-full text-xs whitespace-nowrap">
            –¥–æ–∂–∏–º –ø–æ—Å–ª–µ –¥–µ–º–æ
          </button>
          <button class="ai-action-btn flex-shrink-0 bg-gray-100 text-gray-700 py-1 px-3 rounded-full text-xs whitespace-nowrap">
            –Ω–∞–ø–æ–º–Ω–∏—Ç—å –æ–ø–ª–∞—Ç—É
          </button>
          <button class="ai-action-btn flex-shrink-0 bg-gray-100 text-gray-700 py-1 px-3 rounded-full text-xs whitespace-nowrap">
            —Ä–∞—Å—Å—ã–ª–∫–∞
          </button>
          <button class="ai-action-btn flex-shrink-0 bg-gray-100 text-gray-700 py-1 px-3 rounded-full text-xs whitespace-nowrap">
            –æ—Ç—á–µ—Ç –∑–∞ –Ω–µ–¥–µ–ª—é
          </button>
        </div>
        
        <div class="flex gap-2">
          <button class="text-gray-500 p-2">
            <span class="material-symbols-outlined text-gray-500">attach_file</span>
          </button>
          <input id="ai-input" type="text" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç—É..." 
            class="flex-1 border border-gray-300 rounded-lg px-3 py-2 text-sm" />
          <button id="ai-send" class="bg-blue-600 text-white p-2 rounded-lg">
            <span class="material-symbols-outlined text-white">send</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ========== DATA ==========
    const clients = [
      {
        id: 1,
        name: "–ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏–Ω –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏–Ω–æ–ø–æ–ª—å—Å–∫–∏–π",
        status: "–ö—É–ø–∏–ª",
        lastContact: "1 –¥–µ–Ω—å –Ω–∞–∑–∞–¥",
        overdue: false,
        unread: false,
        avatar: "https://placehold.co/40x40/FFD700/000000?text=–ö",
        day: "–ü–Ω",
        location: "–∫–ª—É–±",
        premium: true,
        phone: "+7 (999) 123-45-67",
        email: "konstantin@example.com",
        age: 32,
        purchasedProducts: ["–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏", "–î–∏–µ—Ç–∞"],
        history: [
          { date: "2025-11-08", message: "–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ–± –æ–ø–ª–∞—Ç–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ", sender: "–∞–≥–µ–Ω—Ç" },
          { date: "2025-11-07", message: "–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –æ –Ω–æ–≤–æ–º —Ç–∞—Ä–∏—Ñ–µ", sender: "—Ç—Ä–µ–Ω–µ—Ä" },
        ],
        activity: { calories: 2200, steps: 8500, water: 2.5, workouts: 4, sleep: 7.2 },
      },
      {
        id: 2,
        name: "–ú–∞—Ä–≥–æ –†.",
        status: "–î–µ–º–æ",
        lastContact: "2 –¥–Ω—è –Ω–∞–∑–∞–¥",
        overdue: false,
        unread: true,
        avatar: "https://placehold.co/40x40/FFD700/000000?text=M",
        day: "–ü–Ω",
        location: "–æ–Ω–ª–∞–π–Ω",
        phone: "+7 (999) 123-45-68",
        email: "margo@example.com",
        age: 28,
        purchasedProducts: [],
        history: [{ date: "2025-11-06", message: "–î–µ–º–æ-–∑–∞–ø–∏—Å—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞", sender: "—Ç—Ä–µ–Ω–µ—Ä" }],
        activity: { calories: 1800, steps: 6200, water: 1.8, workouts: 2, sleep: 6.5 },
      },
      {
        id: 3,
        name: "–ê–Ω–Ω–∞ –ü–µ—Ç—Ä–æ–≤–∞",
        status: "–ö—É–ø–∏–ª",
        lastContact: "2 —á–∞—Å–∞ –Ω–∞–∑–∞–¥",
        overdue: false,
        premium: true,
        avatar: "https://placehold.co/40x40/FF69B4/FFFFFF?text=A",
        day: "–í—Ç",
        location: "–∫–ª—É–±",
        phone: "+7 (999) 123-45-69",
        email: "anna@example.com",
        age: 35,
        purchasedProducts: ["–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏", "–î–∏–µ—Ç–∞", "–ì—Ä—É–ø–ø–æ–≤—ã–µ –∑–∞–Ω—è—Ç–∏—è"],
        history: [
          { date: "2025-11-09", message: "–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ–± –æ–ø–ª–∞—Ç–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ", sender: "–∞–≥–µ–Ω—Ç" },
          { date: "2025-11-08", message: "–ü—Ä–æ–≥—Ä–∞–º–º–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞", sender: "—Ç—Ä–µ–Ω–µ—Ä" },
        ],
        activity: { calories: 2400, steps: 10200, water: 3.0, workouts: 6, sleep: 8.0 },
      },
      {
        id: 4,
        name: "–ò–≤–∞–Ω –°–∏–¥–æ—Ä–æ–≤",
        status: "–î—É–º–∞–µ—Ç",
        lastContact: "1 —á–∞—Å –Ω–∞–∑–∞–¥",
        overdue: true,
        avatar: "https://placehold.co/40x40/4169E1/FFFFFF?text=–ò",
        day: "–°—Ä",
        location: "–≤–æ—Ä–∫–∞—É—Ç",
        phone: "+7 (999) 123-45-70",
        email: "ivan@example.com",
        age: 29,
        purchasedProducts: [],
        history: [{ date: "2025-11-05", message: "–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –ø–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞–º", sender: "—Ç—Ä–µ–Ω–µ—Ä" }],
        activity: { calories: 2000, steps: 7200, water: 2.0, workouts: 3, sleep: 6.8 },
      },
      {
        id: 5,
        name: "–ú–∞—Ä–∏—è –ö–æ–∑–ª–æ–≤–∞",
        status: "–î–µ–º–æ",
        lastContact: "5 —á–∞—Å–æ–≤ –Ω–∞–∑–∞–¥",
        overdue: false,
        avatar: "https://placehold.co/40x40/32CD32/FFFFFF?text=–ú",
        day: "–ß—Ç",
        location: "–æ–Ω–ª–∞–π–Ω",
        phone: "+7 (999) 123-45-71",
        email: "maria@example.com",
        age: 26,
        purchasedProducts: [],
        history: [{ date: "2025-11-04", message: "–î–µ–º–æ-–∑–∞–ø–∏—Å—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞", sender: "—Ç—Ä–µ–Ω–µ—Ä" }],
        activity: { calories: 1700, steps: 5800, water: 1.5, workouts: 1, sleep: 6.0 },
      },
      {
        id: 6,
        name: "–î–º–∏—Ç—Ä–∏–π –í–æ–ª–∫–æ–≤",
        status: "–ù–æ–≤—ã–π",
        lastContact: "3 –¥–Ω—è –Ω–∞–∑–∞–¥",
        overdue: true,
        avatar: "https://placehold.co/40x40/FF4500/FFFFFF?text=–î",
        day: "–ü—Ç",
        location: "–∫–ª—É–±",
        phone: "+7 (999) 123-45-72",
        email: "dmitry@example.com",
        age: 31,
        purchasedProducts: [],
        history: [{ date: "2025-11-03", message: "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞", sender: "—Å–∏—Å—Ç–µ–º–∞" }],
        activity: { calories: 1900, steps: 6800, water: 2.2, workouts: 2, sleep: 7.0 },
      },
    ];

    const tasks = [
      { id: 1, text: "–ù–∞–ø–æ–º–Ω–∏—Ç—å –ú–∞—Ä–≥–æ –æ –∑–∞–ø–∏—Å–∏", client: "–ú–∞—Ä–≥–æ –†.", date: "2025-11-09", overdue: false },
      { id: 2, text: "–ù–∞–ø–æ–º–Ω–∏—Ç—å –ê–Ω–Ω–µ –æ–± –æ–ø–ª–∞—Ç–µ", client: "–ê–Ω–Ω–∞ –ü–µ—Ç—Ä–æ–≤–∞", date: "2025-11-08", overdue: true },
      { id: 3, text: "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É –ò–≤–∞–Ω—É", client: "–ò–≤–∞–Ω –°–∏–¥–æ—Ä–æ–≤", date: "2025-11-09", overdue: false },
      { id: 4, text: "–ü–æ–∑–≤–æ–Ω–∏—Ç—å –ú–∞—Ä–∏–∏ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è", client: "–ú–∞—Ä–∏—è –ö–æ–∑–ª–æ–≤–∞", date: "2025-11-10", overdue: false },
    ];

    // ========== STATE ==========
    let currentScreen = 'dashboard';
    let currentCRMTab = 'clients';
    let searchQuery = '';
    let statusFilter = '–í—Å–µ';
    let selectedClient = null;
    let clientDetailTab = 'info'; // 'info' –∏–ª–∏ 'activity' –∏–ª–∏ 'history'
    
    let aiMessages = [
      { id: 1, sender: "agent", text: "–ü—Ä–∏–≤–µ—Ç! –£ —Ç–µ–±—è –µ—Å—Ç—å –∫–ª–∏–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–º –Ω—É–∂–Ω–æ –Ω–∞–ø–æ–º–Ω–∏—Ç—å –æ–± –æ–ø–ª–∞—Ç–µ." },
      { id: 2, sender: "trainer", text: "–î–∞, –æ—Ç–ø—Ä–∞–≤—å –º–Ω–µ —Å–ø–∏—Å–æ–∫" },
      { id: 3, sender: "agent", text: "–í–æ—Ç –∫–ª–∏–µ–Ω—Ç—ã —Å –ø—Ä–æ—Å—Ä–æ—á–∫–æ–π:" },
    ];

    // ========== HELPERS ==========
    function getStatusColor(status) {
      const colors = {
        '–ö—É–ø–∏–ª': 'bg-green-100 text-green-800',
        '–î—É–º–∞–µ—Ç': 'bg-yellow-100 text-yellow-800',
        '–î–µ–º–æ': 'bg-blue-100 text-blue-800',
        '–ù–æ–≤—ã–π': 'bg-purple-100 text-purple-800'
      };
      return colors[status] || 'bg-gray-100 text-gray-800';
    }

    function getFilterColor(filter) {
      const colors = {
        '–ö—É–ø–∏–ª': 'bg-green-100 text-green-800',
        '–î—É–º–∞–µ—Ç': 'bg-yellow-100 text-yellow-800',
        '–î–µ–º–æ': 'bg-blue-100 text-blue-800',
        '–ù–æ–≤—ã–π': 'bg-purple-100 text-purple-800'
      };
      return colors[filter] || 'bg-gray-100 text-gray-700';
    }

    // ========== NAVIGATION ==========
    const navBtns = document.querySelectorAll('.nav-btn');
    navBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        const screen = btn.dataset.screen;
        switchScreen(screen);
      });
    });

    function switchScreen(screen) {
      currentScreen = screen;
      selectedClient = null;
      updateNavButtons();
      renderScreen();
    }

    function updateNavButtons() {
      navBtns.forEach(btn => {
        const icon = btn.querySelector('.material-symbols-outlined');
        if (btn.dataset.screen === currentScreen) {
          btn.classList.remove('text-gray-500');
          btn.classList.add('text-blue-600');
          if (icon) {
            icon.classList.remove('text-gray-500');
            icon.classList.add('text-blue-600');
          }
        } else {
          btn.classList.remove('text-blue-600');
          btn.classList.add('text-gray-500');
          if (icon) {
            icon.classList.remove('text-blue-600');
            icon.classList.add('text-gray-500');
          }
        }
      });
    }

    // ========== AI MODAL (REMOVED - —Ç–µ–ø–µ—Ä—å agent screen) ==========

    // ========== SCREENS ==========
    function renderScreen() {
      const container = document.getElementById('screen-container');
      const header = document.getElementById('header-title');
      const profileBtn = document.getElementById('profile-btn');
      
      if (selectedClient) {
        header.innerHTML = '';
        header.className = 'flex items-center gap-3';
        const backBtn = document.createElement('button');
        backBtn.className = 'text-gray-600 hover:text-gray-800';
        backBtn.innerHTML = '<span class="material-symbols-outlined text-gray-700">chevron_left</span>';
        backBtn.onclick = () => {
          selectedClient = null;
          renderScreen();
        };
        const title = document.createElement('span');
        title.className = 'text-lg font-semibold text-gray-900';
        title.textContent = '–î–µ—Ç–∞–ª–∏ –∫–ª–∏–µ–Ω—Ç–∞';
        header.appendChild(backBtn);
        header.appendChild(title);
        container.innerHTML = renderClientDetail();
        initClientDetailSwipes();
        return;
      }
      
      profileBtn.textContent = 'üë®üèª‚Äçü¶≤';
      profileBtn.style.background = 'linear-gradient(135deg, #4A90E2 0%, #7C3AED 100%)';
      profileBtn.onclick = () => {
        currentScreen = 'profile';
        renderScreen();
      };
      
      switch(currentScreen) {
        case 'dashboard':
          header.innerHTML = `
            <svg width="110" height="32" viewBox="0 0 110 32" xmlns="http://www.w3.org/2000/svg">
              <defs>
                <linearGradient id="gofitGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                  <stop offset="0%" stop-color="#4A90E2"/>
                  <stop offset="100%" stop-color="#7C3AED"/>
                </linearGradient>
              </defs>
              <text x="0" y="24" font-family="Poppins, Inter, Montserrat, system-ui, sans-serif" font-size="20" font-weight="700" fill="url(#gofitGradient)">GoFit<tspan fill="#2ECC71">.</tspan><tspan font-weight="300" fill="#6B7280">AI</tspan></text>
            </svg>
          `;
          container.innerHTML = renderDashboard();
          break;
        case 'crm':
        case 'deals':
        case 'mailings':
          // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –Ω–∞–∑–∞–¥ –¥–ª—è —ç—Ç–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤
          header.innerHTML = '';
          header.className = 'flex items-center gap-3';
          const backBtn = document.createElement('button');
          backBtn.className = 'text-gray-600 hover:text-gray-800';
          backBtn.innerHTML = '<span class="material-symbols-outlined text-gray-700">chevron_left</span>';
          backBtn.onclick = () => switchScreen('dashboard');
          const title = document.createElement('span');
          title.className = 'text-lg font-semibold text-gray-900';
          title.textContent = currentScreen === 'crm' ? '–ö–ª–∏–µ–Ω—Ç—ã' : currentScreen === 'deals' ? '–°–¥–µ–ª–∫–∏' : '–†–∞—Å—Å—ã–ª–∫–∏';
          header.appendChild(backBtn);
          header.appendChild(title);
          
          if (currentScreen === 'crm') {
            container.innerHTML = renderCRM();
          } else if (currentScreen === 'deals') {
            container.innerHTML = '<div class="p-4"><div class="bg-white rounded-lg p-8 shadow-sm border border-gray-100 text-center"><p class="text-gray-500">–°–¥–µ–ª–∫–∏ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ</p></div></div>';
          } else {
            container.innerHTML = '<div class="p-4"><div class="bg-white rounded-lg p-8 shadow-sm border border-gray-100 text-center"><p class="text-gray-500">–†–∞—Å—Å—ã–ª–∫–∏ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ</p></div></div>';
          }
          break;
        case 'agent':
          header.textContent = '–ò–ò-–∞–≥–µ–Ω—Ç';
          container.innerHTML = renderAgentScreen();
          break;
        case 'profile':
          header.textContent = '–ü—Ä–æ—Ñ–∏–ª—å';
          container.innerHTML = renderProfile();
          break;
      }
    }

    // ========== AGENT SCREEN ==========
    function renderAgentScreen() {
      return `
        <div class="flex flex-col h-full pb-24">
          <div class="flex-1 overflow-y-auto p-4 space-y-3">
            ${aiMessages.map(msg => `
              <div class="flex ${msg.sender === 'trainer' ? 'justify-end' : 'justify-start'}">
                <div class="max-w-xs ${msg.sender === 'trainer' ? 'bg-blue-600 text-white' : 'bg-white text-gray-800 border border-gray-200'} rounded-lg p-3 shadow-sm">
                  <p class="text-sm">${msg.text}</p>
                </div>
              </div>
            `).join('')}
          </div>
          
          <div class="p-4 bg-white border-t border-gray-200 space-y-2 fixed bottom-14 left-0 right-0 max-w-sm mx-auto">
            <div class="flex gap-1 overflow-x-auto pb-2 scrollbar-hide">
              <button class="agent-action-btn flex-shrink-0 bg-gray-100 text-gray-700 py-1 px-3 rounded-full text-xs whitespace-nowrap">
                –¥–æ–∂–∏–º –ø–æ—Å–ª–µ –¥–µ–º–æ
              </button>
              <button class="agent-action-btn flex-shrink-0 bg-gray-100 text-gray-700 py-1 px-3 rounded-full text-xs whitespace-nowrap">
                –Ω–∞–ø–æ–º–Ω–∏—Ç—å –æ–ø–ª–∞—Ç—É
              </button>
              <button class="agent-action-btn flex-shrink-0 bg-gray-100 text-gray-700 py-1 px-3 rounded-full text-xs whitespace-nowrap">
                —Ä–∞—Å—Å—ã–ª–∫–∞
              </button>
              <button class="agent-action-btn flex-shrink-0 bg-gray-100 text-gray-700 py-1 px-3 rounded-full text-xs whitespace-nowrap">
                –æ—Ç—á–µ—Ç –∑–∞ –Ω–µ–¥–µ–ª—é
              </button>
            </div>
            
            <div class="flex gap-2">
              <button class="text-gray-500 p-2">
                <span class="material-symbols-outlined text-gray-500">attach_file</span>
              </button>
              <input id="agent-input" type="text" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç—É..." 
                class="flex-1 border border-gray-300 rounded-lg px-3 py-2 text-sm" />
              <button id="agent-send" class="bg-blue-600 text-white p-2 rounded-lg">
                <span class="material-symbols-outlined text-white">send</span>
              </button>
            </div>
          </div>
        </div>
      `;
    }

    // ========== DASHBOARD ==========
    function renderDashboard() {
      const filteredClients = clients.filter(c => c.status === "–î–µ–º–æ" || c.status === "–ö—É–ø–∏–ª");
      
      return `
        <div class="p-4 space-y-4">
          
          <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
          <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 border border-blue-200 relative">
            <button class="absolute top-2 right-2 text-gray-400 hover:text-gray-600">
              <span class="material-symbols-outlined text-gray-500">close</span>
            </button>
            <div class="flex items-start gap-3">
              <div class="w-8 h-8 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center flex-shrink-0">
                <span class="material-symbols-outlined text-white">smart_toy</span>
              </div>
              <div>
                <p class="text-xs text-gray-500 mb-1">–ò–ò-–∞–≥–µ–Ω—Ç</p>
                <p class="text-sm text-gray-800">–£ —Ç–µ–±—è –Ω–∞ —Å–µ–≥–æ–¥–Ω—è —Ä—è–¥ –¥–µ–ª –ø–æ –æ–±–∑–≤–æ–Ω—É –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –ø–∞—Ä–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –≤–µ—á–µ—Ä–æ–º</p>
              </div>
            </div>
          </div>
          
          <!-- –°–≤–æ–¥–∫–∞ -->
          <div>
            <h3 class="text-sm font-semibold text-gray-800 mb-3">–°–≤–æ–¥–∫–∞</h3>
            <div class="grid grid-cols-2 gap-3">
              <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-100">
                <div class="flex items-center gap-2 mb-2">
                  <span class="material-symbols-outlined text-green-600">payments</span>
                  <span class="text-sm text-gray-600">–í—ã—Ä—É—á–∫–∞</span>
                </div>
                <p class="text-2xl font-bold text-gray-900">125—Ç</p>
                <p class="text-xs text-green-600">+15% –∑–∞ –º–µ—Å—è—Ü</p>
              </div>
              
              <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-100">
                <div class="flex items-center gap-2 mb-2">
                  <span class="material-symbols-outlined text-purple-600">trending_up</span>
                  <span class="text-sm text-gray-600">–ü—Ä–æ–¥–∞–∂–∏</span>
                </div>
                <p class="text-2xl font-bold text-gray-900">8</p>
                <p class="text-xs text-green-600">+1 –∑–∞ –Ω–µ–¥–µ–ª—é</p>
              </div>
            </div>
          </div>
          
          <!-- –î–µ–ª–∞ -->
          <div>
            <h3 class="text-sm font-semibold text-gray-800 mb-3">–î–µ–ª–∞</h3>
            <div class="flex space-x-4 overflow-x-auto scrollbar-hide">
              <div class="flex-shrink-0 w-[92%] bg-white rounded-lg p-4 shadow-sm border border-gray-100">
                <div class="flex justify-between items-center mb-3">
                  <h4 class="font-medium text-gray-900">–ë–ª–∏–∂–∞–π—à–∏–µ –∑–∞–¥–∞—á–∏</h4>
                </div>
                ${tasks.slice(0, 3).map(task => `
                  <div class="flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0">
                    <div>
                      <p class="text-sm text-gray-800">${task.text}</p>
                      <p class="text-xs text-gray-500">${task.client}</p>
                    </div>
                    <span class="text-xs px-2 py-1 rounded ${task.overdue ? 'bg-red-100 text-red-800' : 'bg-green-100 text-green-800'}">
                      ${task.overdue ? '–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ' : task.date}
                    </span>
                  </div>
                `).join('')}
              </div>
              
              <div class="flex-shrink-0 w-[92%] bg-white rounded-lg p-4 shadow-sm border border-gray-100">
                <div class="flex justify-between items-center mb-3">
                  <h4 class="font-medium text-gray-900">–ö–ª–∏–µ–Ω—Ç—ã –Ω–∞ –Ω–µ–¥–µ–ª–µ</h4>
                </div>
                ${filteredClients.slice(0, 3).map(client => `
                  <div class="flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0">
                    <div class="flex-1">
                      <div class="flex justify-between items-center">
                        <p class="text-sm text-gray-800">${client.name}</p>
                        <div class="flex gap-2">
                          <span class="text-xs px-2 py-1 rounded ${getStatusColor(client.status)}">
                            ${client.day}
                          </span>
                          <span class="text-xs px-2 py-1 rounded bg-gray-100 text-gray-800">
                            ${client.location}
                          </span>
                        </div>
                      </div>
                    </div>
                  </div>
                `).join('')}
              </div>
            </div>
          </div>
          
          <!-- CRM -->
          <div>
            <h3 class="text-sm font-semibold text-gray-800 mb-3">CRM</h3>
            <div class="grid grid-cols-3 gap-3">
              <div onclick="switchScreen('crm')" class="bg-white rounded-lg p-4 shadow-sm border border-gray-100 text-center hover:bg-gray-50 transition-colors cursor-pointer">
                <div class="flex items-center justify-center gap-2 mb-2">
                  <span class="material-symbols-outlined text-blue-600">group</span>
                </div>
                <p class="text-2xl font-bold text-gray-900">24</p>
                <p class="text-xs text-gray-600 mt-1">–ö–ª–∏–µ–Ω—Ç—ã</p>
              </div>
              
              <div onclick="switchScreen('deals')" class="bg-white rounded-lg p-4 shadow-sm border border-gray-100 text-center hover:bg-gray-50 transition-colors cursor-pointer">
                <div class="flex items-center justify-center gap-2 mb-2">
                  <span class="material-symbols-outlined text-purple-600">handshake</span>
                </div>
                <p class="text-2xl font-bold text-gray-900">12</p>
                <p class="text-xs text-gray-600 mt-1">–°–¥–µ–ª–∫–∏</p>
              </div>
              
              <div onclick="switchScreen('mailings')" class="bg-white rounded-lg p-4 shadow-sm border border-gray-100 text-center hover:bg-gray-50 transition-colors cursor-pointer">
                <div class="flex items-center justify-center gap-2 mb-2">
                  <span class="material-symbols-outlined text-green-600">mail</span>
                </div>
                <p class="text-2xl font-bold text-gray-900">3</p>
                <p class="text-xs text-gray-600 mt-1">–†–∞—Å—Å—ã–ª–∫–∏</p>
              </div>
            </div>
          </div>
          
        </div>
      `;
    }

    // ========== CRM ==========
    function renderCRM() {
      return `
        <div id="crm-content">
          ${renderCRMClients()}
        </div>
      `;
    }

    function renderCRMClients() {
      const filtered = clients.filter(c => {
        const matchesSearch = c.name.toLowerCase().includes(searchQuery.toLowerCase());
        const matchesStatus = statusFilter === '–í—Å–µ' || c.status === statusFilter;
        return matchesSearch && matchesStatus;
      });
      
      return `
        <div class="p-4 space-y-3">
          <div class="relative">
            <div class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400">
              <span class="material-symbols-outlined text-gray-400">search</span>
            </div>
            <input type="text" id="search-input" placeholder="–ü–æ–∏—Å–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤..." value="${searchQuery}"
              class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm" />
          </div>
          
          <div class="flex gap-2 overflow-x-auto pb-2 scrollbar-hide">
            ${['–í—Å–µ', '–ö—É–ø–∏–ª', '–î—É–º–∞–µ—Ç', '–î–µ–º–æ', '–ù–æ–≤—ã–π'].map(filter => `
              <button class="status-filter-btn flex-shrink-0 px-3 py-1 rounded-full text-xs whitespace-nowrap ${statusFilter === filter ? 'bg-blue-600 text-white' : getFilterColor(filter)}" data-filter="${filter}">
                ${filter}
              </button>
            `).join('')}
          </div>
          
          <div class="space-y-3">
            ${filtered.length ? filtered.map(client => {
              const initial = client.name.charAt(0).toUpperCase();
              const colors = ['bg-blue-500', 'bg-purple-500', 'bg-green-500', 'bg-orange-500', 'bg-pink-500', 'bg-indigo-500'];
              const colorClass = colors[client.id % colors.length];
              return `
              <div class="client-card bg-white rounded-lg p-4 shadow-sm border border-gray-100 cursor-pointer" data-client-id="${client.id}">
                <div class="flex items-start gap-3">
                  <div class="w-12 h-12 rounded-full ${colorClass} flex items-center justify-center text-white font-bold text-lg flex-shrink-0">
                    ${initial}
                  </div>
                  <div class="flex-1 min-w-0">
                    <div class="flex items-center gap-2 mb-1">
                      <h3 class="font-medium text-gray-900 truncate">${client.name}</h3>
                      ${client.premium ? '<span class="material-symbols-outlined text-yellow-500">workspace_premium</span>' : ''}
                    </div>
                    <span class="inline-block px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(client.status)}">
                      ${client.status}
                    </span>
                  </div>
                </div>
              </div>
            `}).join('') : '<div class="text-center py-8"><p class="text-gray-500">–ö–ª–∏–µ–Ω—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p></div>'}
          </div>
        </div>
      `;
    }

    function renderCRMDeals() {
      return `
        <div class="p-4 space-y-6">
          <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-100 text-center">
            <p class="text-gray-500">–°–¥–µ–ª–∫–∏ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ</p>
          </div>
        </div>
      `;
    }

    function renderCRMReports() {
      return `
        <div class="p-4 space-y-6">
          <div class="grid grid-cols-3 gap-3">
            <div class="border border-gray-200 rounded-lg p-3 text-center bg-blue-50">
              <span class="material-symbols-outlined text-green-600">mail</span>
              <p class="text-xs text-gray-600">–ê–∫—Ç–∏–≤–Ω—ã–µ —Ä–∞—Å—Å—ã–ª–∫–∏</p>
              <p class="text-lg font-bold text-gray-900">3</p>
            </div>
            <div class="border border-gray-200 rounded-lg p-3 text-center bg-green-50">
              <span class="material-symbols-outlined text-green-600">visibility</span>
              <p class="text-xs text-gray-600">–û—Ç–∫—Ä—ã—Ç–∏–µ</p>
              <p class="text-lg font-bold text-gray-900">65%</p>
            </div>
            <div class="border border-gray-200 rounded-lg p-3 text-center bg-purple-50">
              <span class="material-symbols-outlined text-purple-600">trending_up</span>
              <p class="text-xs text-gray-600">–ö–æ–Ω–≤–µ—Ä—Å–∏—è</p>
              <p class="text-lg font-bold text-gray-900">12%</p>
            </div>
          </div>
          
          <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-100">
            <h3 class="font-medium text-gray-900 mb-3">–ú–µ—Ç—Ä–∏–∫–∏ (KPI)</h3>
            <div class="space-y-3">
              <div class="flex justify-between items-center">
                <span class="text-sm text-gray-600">–°—Ä–µ–¥–Ω–∏–π —á–µ–∫</span>
                <span class="text-sm font-medium text-gray-900">8—Ç</span>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-sm text-gray-600">LTV</span>
                <span class="text-sm font-medium text-gray-900">32—Ç</span>
              </div>
            </div>
          </div>
          
          <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-100">
            <h3 class="font-medium text-gray-900 mb-3">–ö–∞–Ω–∞–ª—ã</h3>
            <div class="space-y-3">
              <div class="flex justify-between items-center">
                <span class="text-sm text-gray-600">Instagram</span>
                <span class="text-sm font-medium text-gray-900">45%</span>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-sm text-gray-600">–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</span>
                <span class="text-sm font-medium text-gray-900">30%</span>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-sm text-gray-600">–†–µ–∫–ª–∞–º–∞</span>
                <span class="text-sm font-medium text-gray-900">25%</span>
              </div>
            </div>
          </div>
        </div>
      `;
    }

    // ========== CLIENT DETAIL ==========
    function renderClientDetail() {
      if (!selectedClient) return '';
      
      return `
        <div class="flex flex-col h-full">
          <div class="bg-white border-b border-gray-200">
            <div class="relative flex">
              <button class="client-tab-btn flex-1 py-3 text-sm font-medium ${clientDetailTab === 'info' ? 'text-blue-600' : 'text-gray-600'}" data-tab="info">
                –ò–Ω—Ñ–æ
              </button>
              <button class="client-tab-btn flex-1 py-3 text-sm font-medium ${clientDetailTab === 'activity' ? 'text-blue-600' : 'text-gray-600'}" data-tab="activity">
                –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
              </button>
              <button class="client-tab-btn flex-1 py-3 text-sm font-medium ${clientDetailTab === 'history' ? 'text-blue-600' : 'text-gray-600'}" data-tab="history">
                –ò—Å—Ç–æ—Ä–∏—è
              </button>
              <div class="tab-indicator" style="width: 33.33%; left: ${clientDetailTab === 'info' ? '0%' : clientDetailTab === 'activity' ? '33.33%' : '66.66%'};"></div>
            </div>
          </div>
          
          <div id="client-detail-content" class="flex-1 overflow-y-auto p-4 space-y-6">
            ${clientDetailTab === 'info' ? renderClientInfo() : clientDetailTab === 'activity' ? renderClientActivity() : renderClientHistory()}
          </div>
          
          <div class="p-4 bg-white border-t border-gray-200">
            <button class="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-6 rounded-xl font-medium flex items-center justify-center gap-2">
              <span class="material-symbols-outlined text-blue-600">chat</span>
              –°–æ–æ–±—â–µ–Ω–∏–µ
            </button>
          </div>
        </div>
      `;
    }

    function renderClientInfo() {
      return `
        <div class="flex flex-col items-center">
          <img src="${selectedClient.avatar}" alt="${selectedClient.name}" class="w-24 h-24 rounded-full mb-4 border-4 border-blue-100" />
          <h2 class="text-xl font-bold text-gray-900">${selectedClient.name}</h2>
          <div class="flex items-center gap-2 mt-2">
            <span class="material-symbols-outlined text-green-600">check</span>
            <span class="text-sm font-medium text-green-600 bg-green-100 px-3 py-1 rounded-full">
              –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω
            </span>
          </div>
        </div>
        
        <div class="bg-white rounded-xl p-4 shadow-sm border border-gray-100">
          <h3 class="font-medium text-gray-900 mb-3">–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
          <div class="space-y-3">
            <div class="flex justify-between items-center">
              <div class="flex items-center gap-2">
                <span class="material-symbols-outlined text-green-600">call</span>
                <span class="text-gray-500">–¢–µ–ª–µ—Ñ–æ–Ω</span>
              </div>
              <span class="text-gray-900">${selectedClient.phone}</span>
            </div>
            <div class="flex justify-between items-center">
              <div class="flex items-center gap-2">
                <span class="material-symbols-outlined text-green-600">mail</span>
                <span class="text-gray-500">Email</span>
              </div>
              <span class="text-gray-900">${selectedClient.email}</span>
            </div>
            <div class="flex justify-between items-center">
              <div class="flex items-center gap-2">
                <span class="material-symbols-outlined text-gray-700">person</span>
                <span class="text-gray-500">–í–æ–∑—Ä–∞—Å—Ç</span>
              </div>
              <span class="text-gray-900">${selectedClient.age} –ª–µ—Ç</span>
            </div>
            <div class="flex justify-between items-center">
              <div class="flex items-center gap-2">
                <span class="material-symbols-outlined text-gray-500">location_on</span>
                <span class="text-gray-500">–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ</span>
              </div>
              <span class="text-gray-900">${selectedClient.location}</span>
            </div>
          </div>
        </div>
      `;
    }

    function renderClientActivity() {
      return `
        <div class="bg-white rounded-xl p-4 shadow-sm border border-gray-100">
          <h3 class="font-medium text-gray-900 mb-4">–§–∏–∑–∏—á–µ—Å–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</h3>
          <div class="grid grid-cols-2 gap-4">
            <div class="border border-gray-200 rounded-lg p-3 text-center">
              <div class="text-2xl font-bold text-gray-900">${selectedClient.activity.calories}</div>
              <p class="text-sm text-gray-600">–ö–∞–ª–æ—Ä–∏–∏</p>
            </div>
            <div class="border border-gray-200 rounded-lg p-3 text-center">
              <div class="text-2xl font-bold text-gray-900">${selectedClient.activity.steps}</div>
              <p class="text-sm text-gray-600">–®–∞–≥–∏</p>
            </div>
            <div class="border border-gray-200 rounded-lg p-3 text-center">
              <div class="text-2xl font-bold text-gray-900">${selectedClient.activity.water}–ª</div>
              <p class="text-sm text-gray-600">–í–æ–¥–∞</p>
            </div>
            <div class="border border-gray-200 rounded-lg p-3 text-center">
              <div class="text-2xl font-bold text-gray-900">${selectedClient.activity.workouts}</div>
              <p class="text-sm text-gray-600">–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</p>
            </div>
            <div class="border border-gray-200 rounded-lg p-3 text-center col-span-2">
              <div class="text-2xl font-bold text-gray-900">${selectedClient.activity.sleep}—á</div>
              <p class="text-sm text-gray-600">–°–æ–Ω</p>
            </div>
          </div>
        </div>
        
        <div class="bg-white rounded-xl p-4 shadow-sm border border-gray-100">
          <h3 class="font-medium text-gray-900 mb-3">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –Ω–µ–¥–µ–ª—é</h3>
          <div class="space-y-3">
            <div class="flex justify-between items-center">
              <span class="text-gray-700">–°—Ä–µ–¥–Ω–∏–µ —à–∞–≥–∏</span>
              <span class="text-gray-900">7800/–¥–µ–Ω—å</span>
            </div>
            <div class="flex justify-between items-center">
              <span class="text-gray-700">–°—Ä–µ–¥–Ω–∏–µ –∫–∞–ª–æ—Ä–∏–∏</span>
              <span class="text-gray-900">2100/–¥–µ–Ω—å</span>
            </div>
            <div class="flex justify-between items-center">
              <span class="text-gray-700">–ê–∫—Ç–∏–≤–Ω—ã–µ –¥–Ω–∏</span>
              <span class="text-gray-900">5/7</span>
            </div>
          </div>
        </div>
      `;
    }

    // ========== CLIENT HISTORY ==========
    function renderClientHistory() {
      return `
        <div class="bg-white rounded-xl p-4 shadow-sm border border-gray-100">
          <h3 class="font-medium text-gray-900 mb-3">–ò—Å—Ç–æ—Ä–∏—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π</h3>
          <div class="space-y-3">
            ${selectedClient.history.map(item => `
              <div class="border-b border-gray-100 pb-3 last:border-b-0 last:pb-0">
                <p class="text-sm text-gray-800">${item.message}</p>
                <div class="flex justify-between items-center mt-1">
                  <span class="text-xs text-gray-500">${item.date}</span>
                  <span class="text-xs text-gray-400">${item.sender}</span>
                </div>
              </div>
            `).join('')}
          </div>
        </div>
        
        <div class="bg-white rounded-xl p-4 shadow-sm border border-gray-100">
          <h3 class="font-medium text-gray-900 mb-3">–ó–∞–∫–∞–∑—ã</h3>
          <div class="space-y-3">
            ${selectedClient.purchasedProducts.length ? selectedClient.purchasedProducts.map(product => `
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                  <div class="p-2 bg-blue-100 rounded-lg">
                    <span class="material-symbols-outlined text-green-600">check</span>
                  </div>
                  <span class="text-gray-700">${product}</span>
                </div>
              </div>
            `).join('') : '<p class="text-gray-500 text-center py-4">–ù–µ—Ç –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤</p>'}
          </div>
        </div>
      `;
    }

    // ========== PROFILE ==========
    function renderProfile() {
      return `
        <div class="p-4 space-y-3">
          <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-100">
            <h3 class="font-medium text-gray-900 mb-3 flex items-center gap-2">
              <span class="material-symbols-outlined text-gray-700">person</span>
              –û –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
            </h3>
            <div class="space-y-3">
              <div class="flex justify-between items-center">
                <span class="text-sm text-gray-600">–ò–º—è</span>
                <span class="text-sm font-medium text-gray-900 text-right">–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤</span>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-sm text-gray-600">–°—Ç–∞–∂</span>
                <span class="text-sm font-medium text-gray-900">5 –ª–µ—Ç</span>
              </div>
              <div class="flex justify-between items-start">
                <span class="text-sm text-gray-600">–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è</span>
                <span class="text-sm font-medium text-gray-900 text-right max-w-[60%]">–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–∏–Ω–≥, –ø–∏—Ç–∞–Ω–∏–µ</span>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-sm text-gray-600">–ö–æ–Ω—Ç–∞–∫—Ç</span>
                <span class="text-sm font-medium text-gray-900">+7 (999) 123-45-67</span>
              </div>
            </div>
          </div>
          
          <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-100">
            <h3 class="font-medium text-gray-900 mb-3 flex items-center gap-2">
              <span class="material-symbols-outlined text-gray-700">archive</span>
              –ù–∞—Å—Ç—Ä–æ–π–∫–∏ CRM
            </h3>
            <div class="space-y-3">
              <div class="border border-gray-200 rounded-lg p-3">
                <h4 class="font-medium text-gray-900 mb-2">–ü—Ä–æ–¥—É–∫—Ç—ã –∏ —É—Å–ª—É–≥–∏</h4>
                <div class="text-sm text-gray-600 space-y-1">
                  <p>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ ‚Äî 5000 —Ä—É–±</p>
                  <p>–ü–ª–∞–Ω –ø–∏—Ç–∞–Ω–∏—è ‚Äî 2000 —Ä—É–±</p>
                  <p>–ü—Ä–æ–≥—Ä–∞–º–º–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ ‚Äî 3000 —Ä—É–±</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-100">
            <h3 class="font-medium text-gray-900 mb-3 flex items-center gap-2">
              <span class="material-symbols-outlined text-gray-700">settings</span>
              –û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
            </h3>
            <div class="space-y-3">
              <button class="w-full text-left text-sm text-gray-700 py-2 border-b border-gray-100">
                –£—Å–ª–æ–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
              </button>
              <button class="w-full text-left text-sm text-gray-700 py-2 border-b border-gray-100">
                –ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
              </button>
              <button class="w-full text-left text-sm text-gray-700 py-2">
                –°–ø—Ä–∞–≤–æ—á–Ω—ã–π —Ü–µ–Ω—Ç—Ä
              </button>
            </div>
          </div>
          
          <div class="text-center text-xs text-gray-500 mt-4">
            <p>Ai –º–æ–∂–µ—Ç –æ—à–∏–±–∞—Ç—å—Å—è ‚Äî –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.</p>
          </div>
        </div>
      `;
    }

    // ========== EVENT DELEGATION ==========
    document.addEventListener('click', (e) => {
      // Agent screen actions
      if (e.target.closest('.agent-action-btn')) {
        const action = e.target.closest('.agent-action-btn').textContent.trim();
        aiMessages.push({ id: Date.now(), sender: 'agent', text: `–î–µ–π—Å—Ç–≤–∏–µ: ${action}` });
        renderScreen();
      }
      
      if (e.target.id === 'agent-send') {
        const input = document.getElementById('agent-input');
        const text = input.value.trim();
        if (text) {
          aiMessages.push({ id: Date.now(), sender: 'trainer', text });
          input.value = '';
          renderScreen();
        }
      }
      
      // CRM Tab switching
      if (e.target.closest('.crm-tab-btn')) {
        const tab = e.target.closest('.crm-tab-btn').dataset.tab;
        currentCRMTab = tab;
        renderScreen();
      }
      
      // Search
      if (e.target.id === 'search-input') {
        const updateSearch = (ev) => {
          searchQuery = ev.target.value;
          renderScreen();
        };
        e.target.removeEventListener('input', updateSearch);
        e.target.addEventListener('input', updateSearch);
      }
      
      // Status filter
      if (e.target.closest('.status-filter-btn')) {
        statusFilter = e.target.closest('.status-filter-btn').dataset.filter;
        renderScreen();
      }
      
      // Client card click
      if (e.target.closest('.client-card')) {
        const clientId = parseInt(e.target.closest('.client-card').dataset.clientId);
        selectedClient = clients.find(c => c.id === clientId);
        clientDetailTab = 'info';
        renderScreen();
      }
      
      // Client detail tabs
      if (e.target.closest('.client-tab-btn')) {
        clientDetailTab = e.target.closest('.client-tab-btn').dataset.tab;
        renderScreen();
      }
    });

    document.addEventListener('keydown', (e) => {
      if (e.target.id === 'agent-input' && e.key === 'Enter') {
        const text = e.target.value.trim();
        if (text) {
          aiMessages.push({ id: Date.now(), sender: 'trainer', text });
          e.target.value = '';
          renderScreen();
        }
      }
    });

    // ========== SWIPES ==========
    let touchStartX = 0;
    let touchEndX = 0;

    function initCRMSwipes() {
      const content = document.getElementById('crm-content');
      
      content.addEventListener('touchstart', (e) => {
        touchStartX = e.touches[0].clientX;
      });
      
      content.addEventListener('touchmove', (e) => {
        touchEndX = e.touches[0].clientX;
      });
      
      content.addEventListener('touchend', () => {
        if (!touchStartX || !touchEndX) return;
        const diff = touchStartX - touchEndX;
        
        if (Math.abs(diff) > 50) {
          if (diff > 0) { // –°–≤–∞–π–ø –≤–ª–µ–≤–æ
            if (currentCRMTab === 'clients') currentCRMTab = 'deals';
            else if (currentCRMTab === 'deals') currentCRMTab = 'reports';
          } else { // –°–≤–∞–π–ø –≤–ø—Ä–∞–≤–æ
            if (currentCRMTab === 'deals') currentCRMTab = 'clients';
            else if (currentCRMTab === 'reports') currentCRMTab = 'deals';
          }
          renderScreen();
        }
        
        touchStartX = 0;
        touchEndX = 0;
      });
    }

    function initClientDetailSwipes() {
      const content = document.getElementById('client-detail-content');
      
      content.addEventListener('touchstart', (e) => {
        touchStartX = e.touches[0].clientX;
      });
      
      content.addEventListener('touchmove', (e) => {
        touchEndX = e.touches[0].clientX;
      });
      
      content.addEventListener('touchend', () => {
        if (!touchStartX || !touchEndX) return;
        const diff = touchStartX - touchEndX;
        
        if (Math.abs(diff) > 50) {
          if (diff > 0 && clientDetailTab === 'info') {
            clientDetailTab = 'activity';
            renderScreen();
          } else if (diff < 0 && clientDetailTab === 'activity') {
            clientDetailTab = 'info';
            renderScreen();
          }
        }
        
        touchStartX = 0;
        touchEndX = 0;
      });
    }

    // ========== INIT ==========
    renderScreen();
    renderAIMessages();
  </script>
</body>
</html>
